---
title: 빠른 검색이 필요할 땐, 해시 자료구조
author: codongmin
date: 2024-11-18T21:08:00
categories: 
tags: 
preview:
---

## 들어가며

해시 자료구조에 대한 전반적인 내용을 다룬다. 해시 자료구조에 대한 이해를 돕기 위해 간단한 예시를 기반으로 글을 전개해나간다. 해시 자료구조의 핵심 개념인 해싱에 대한 이해로 시작해서 해싱을 위한 해시 함수에 대해 알아보고, 해시 자료구조에서 필연적으로 만나게 되는 해시 충돌에 대해서 다룬다. 그리고 해시 충돌을 해결하는 여러 방법들을 설명한다.

더 나아가 자바에서는 어떤 해시 충돌 회피 방식을 사용하는지 다룬다. 자바 버전에 따라 해시 충돌 해결 방식이 달라졌으며, 특히 자바 8버전 이후 `HashMap`에서 최적화된 충돌 해결 방식에 대해 설명한다. 마지막으로 자바의 대표적 해시 기반 자료구조인 `HashMap`의 내부 동작 원리를 통해 해시기반 자료구조를 사용할때 어떻게 활용할 수 있을지 살펴본다.


대상이 아닌 독자는 다음과 같다.
- 해시 테이블의 구조와 해시 함수가 어떻게 동작하는지 명확하게 이해하고 있는 사람. 
- 해시 충돌에 대한 개념을 이해하고 있는 사람.
- 해시 충돌이 발생했을 때 자바에서 어떤 방식으로 문제를 해결하는지 이해하고 있는 사람. 
- 자바 8 버전 이전과 이후 최적화된 충돌 해결 방식의 차이에 대해서 이해하고 있는 사람. 
- `hashcode()`와 메서드의 관계와 해시자료 구조와의 연관성을 이해하고 있는 사람.

## 물품 보관,



## 해싱과 용어
해싱(Hashing)이란 임의의 크기를 가진 데이터를 고정된 크기의 데이터로 변환하는 과정을 말한다. 
임의의 크기를 가진 데이터를 입력값라고 부르고 변환된 고정된 크기의 데이터를 출력값이라고 부른다. 

해시 자료구조에서는 해싱 과정을 통해서 값을 저장하고, 조회한다. 
이때, 저장하고자 하는 값을 `value`라 부르고, `value`를 구분할 수 있는 고유한 값을 `key`라고 정의한다.

(그림)

이때 입력받은 `key`를 고정길이의 해시값으로 반환해주는 함수(알고리즘)을 해시 함수라고 부른다. 
해시값이란, 해시 함수의 출력값으로 원본 데이터를 대표하는 고정길이의 값을 의미한다. 

이 해시값을 인덱스 값으로 이용해서 데이터를 저장하는 구조를 해시 테이블이라고 한다.
`key`를 해싱하여 나온 고정된 크기의 해시값을 인덱스로 `value`의 저장위치를 결정한다. 

그리고 실제 `value`가 저장되는 공간을 버킷(Bucket) 이라고 부른다.


key 값만 있으면 value를 바로 찾을 수 있음
성능 O(1)

## 해시 함수 
해시함수는 키를 입력으로 받아 고정 크기의 해시값으로 반환해주는 알고리즘을 말한다. 

해시함수는 단순히 변환하는 역할을 하는 함수지만 구현 정도에 따라 함수의 좋고 나쁨이 결정된다. 
함수의 좋고 나쁨의 기준은 해시 자료구조의 성능에 따라 결정된다. 

좋은 해시 함수의 조건은 다음과 같다. 
1. 키 값을 고르게 분포시켜야 하고, 
2. 해시값 변환 계산이 빨라야 한다. 
3. 그리고 해시 충돌 가능성을 최소화 해야한다. 

### 고르지 않은 키 값 분포

(그림)

충돌문제로 이어짐, 공간이 효율적으로 사용되지 못해 최악의 경우 해시 자료구조의 이점을 못누림

### 느린 해시값 변환 계산

(그림)

해시 자료구조의 이점을 못누림


해시 충돌이란?

## 해시 충돌 
해시충돌이란 서로 다른 입력값에 대해서 동일한 해시값이 출력되는 상황이다. 
즉, 해시 테이블에서 서로 다른 데이터가 같은 버킷에 할당하게 되는 경우를 말한다. 

왜 이런일이 발생할까? 해시함수가 고장나거나 잘못된 것이 아닐까? 

(그림)

발생원인은 고정 크기의 출력값에 있다. 
해시 충돌은 해시 테이블의 크기가 유한하기 때문에 발생하는 문제이다. 

입력값의 범위 자체가 해시 테이블의 크기보다 항상 크기 때문에 필연적으로 발생할 수 밖에 없다. 
100개의 공을 10개의 서로 다른 공간에 겹치지 않게 넣을 수 있다면(?) 해시충돌을 피할 수 있지만 현실적으로 불가능하다. 

링크, 비둘기집 문제, 생일 문제

앞에서 좋은 해시함수의 조건으로 "해시 충돌을 최소화해야 한다"고 했음. 

### 많은 해시 충돌 발생

결론 -> 해시 테이블 성능이 저하됨. 

같은 인덱스의 버킷에 연결리스트 형태로 저장
뒤에서 다룰 해결방법 중 하나.

결국 충돌이 발생하게 될 경우 



## 해시 충돌 해결


## Java HashMap 동작 원리


## 마무리
