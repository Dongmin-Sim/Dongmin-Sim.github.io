---
title: 객체를 만드는 방법들
author: codongmin
date: 2024-11-05T21:06:00
categories: 
tags: 
preview:
---

고민 : 개념을 일부러 왔다갔다하기?
딱 구분해서가기? 

의도 : 

가제: 자바서 클래스를 생성하는 방법 

## 들어가며

프로그래밍 언어를 배우다보면 곧잘 만들게 되는게 클래스, 객체다. 조금 더 공부해 보다보면 생성자, 내부 클래스, 오버로딩 등 객체를 생성하는 과정속에서 새롭게 접하는 키워드들이 많다. 나의 경험에 비추어봤을때, 아 이런게 있구나 그런데 이건 대체 언제 사용하는거지? 일단 한번 봐두자 하고 당장의 흥미에 밀려 곧잘 잊어버렸다. 

글에서는 자바 언어의 객체의 생성에 관한 기초가 되는 클래스부터, 단순히 기본 생성자를 사용해 겍체를 만드는 방법 외에도 다양한 방법으로 객체를 만들 수 있는 방법들을 다루고자 한다. 자바 언어의 기초내용이 어떻게 다른 프로그래밍 개념들과 연결될 수 있는지 중점으로 전개하는 것을 목표로 하고 있다.

이 글은 자바 기본서를 한번 정도 읽어보았지만 잘 감이오지 않거나, 과거의 나처럼 기초 내용에 흥미가 잘 가지 않는다면 도움이 될 수 있다.

## 클래스란?

클래스란 무엇인가요? 라는 질문을 하기전에 객체란 무엇인가? 에 먼저 답해야한다. 왜냐하면 클래스는 객체를 만들기 위한 템플릿이기 때문이다. 객체란 무엇인가? 라는 질문을 들으면 몽해지며 머리속이 추상적으로 변하는 느낌이 들며 입이 잘떨어지지 않는다. 


### 객체란?
객체에 대한 여러 정의들이 있지만, 나는 2가지로 구분한 객체의 정의*(참조)를 더 선호한다. 실물 세계의 객체와 프로그래밍 세계의 객체로 구분하는 것이다. 

실물 세계에서의 객체는 말그대로 세상에 존재하는 모든 것들이다. 핸드폰, 사람, 무형의 형태도 객체가 된다. 
프로그래밍 세계에서의 객체는 실물 세계에서의 객체와 비슷하지만 다르다. 

프로그래밍 세계에서의 객체는 목적을 달성하기 위해 스스로 자신의 상태를 살피고 행동하는 개체이다. 여기서 목적은 애플리케이션의 동작하고자 목적일 수도 있고 비지니스 목적일 수도 있다. 


### ? 
마치 마을(애플리케이션)을 운영(목적)하는 게임에서의 캐릭터(객체) 같은 존재로 상상해볼 수 있다. 마을은 잘 운영하기 위해서 캐릭터(객체)는 다른 캐릭터들과 거래도 하고, 힘을 합쳐 마을의 어려운 일들을 처리하기도 한다.

앞으로 나올 내용들에서는 마을을 운영하는 게임에서의 개릭터(객체)가 어떻게 구성되어있으며, 어떻게 생성되는지를 하나씩 살펴본다. 전지적 플레이어 시점이 되어 마을의 캐릭터들을 만들어보자 

![Desktop View](https://stardewvalleywiki.com/mediawiki/images/4/45/StardewValleyFair.png){: width="972" height="589"}_이미지 설명_

### 클래스의 구성요소

클래스는 객체를 만들기 위한 템플릿이다. 

(커스터 마이징 사진)

앞서 객체는 목적을 달성하기 위해 스스로 자신의 상태를 살피고 행동하는 개체라고 정의했다.
객체가 어떤 상태를 가질 수 있는지 그리고 어떤 행동을 할 수 있는지 정의해 놓은 틀이다. 

#### 변수와 메소드 
프로그래밍 세계에서는 객체가 **가질 수 있는 상태**를 변수라고 부르고, **어떤 행동을 할 수 있는지** 정의해놓은 것을 메소드라고 부른다. 

예시를 통해 클래스를 이해해보자. 이 마을이 돌아가려면, 광산에서 채굴할 수 있는 석탄이 필요하다. 
석탄을 채굴할 수 있는 광부 주민이 필요하다. 우리는 광부 주민이 어떤 상태를 가져야하는지, 어떤 행동을 해야하는지 정의해놓아야 광부 역할의 주민들을 받을 수 있다.

일단 처음 떠오르는대로 광부의 역할과 책임을 정의해보자 
- 광부를 부를만한 이름이 있어야한다. 
- 광부는 광산의 위치를 알고 있어야한다. 
- 광부는 광산을 캘 수 있어야 한다. 
- 광부는 광물을 보관할 가방이 있어야한다. 

이를 프로그래밍 세계에서는 다음과 같이 표현한다.

```java
class Miner {
	private String name;
	private String mineLocation;
	private List<Mineral> bags = new ArrayList<>();

	public Mineral mining(){};
}
```

#### 생성자
객체를 생성하기 위한 행동을 정의해놓은 것이 생성자이다. 

이제 주민을 받아볼 차례다. 광부 주민을 마을로 불러오기 위해서는 광부 주민을 창조해야한다! 
아쉽게도 광부 클래스만으로는 광부 주민을 창조할 수 없다. 언급했지만 클래스란 객체를 만들기 위한 템플릿일 뿐이다. 구체적으로 어떤 광부 주민을 창조할 것인지 설정해주어야 한다. 

생성자는 객체를 초기화하는 역할을 맡는다. 

생성자는 크게 2가지로 나눌 수 있다. 
- 기본 생성자 
- 매개변수가 있는 생성자

두 가지 생성자는 매개 변수가 있느냐 없느냐의 차이지 반환되는 객체의 타입에는 차이가 없다. 

**기본생성자** 
만일 객체를 생성하는데, 객체가 가지는 상태들을 주입할 필요가 없을 때 필요하다. 
이때, 상태에 초기화되는 값들은 타입에 따라 기본값이나 null 값으로 채워진다.
- 사용자가 임의로 지정해줄 수 있음.

```java
class Miner {
	public Miner(){ // 기본 생성자
	    // 여기서 상태를 초기화해줄 수 있음.
	} 
}
```

**매개변수가 있는 생성자** 
만일 객체를 생성하는데, 객체가 가지는 상태들을 외부에서 주입해주고 싶을 때, 혹은 객체의 필수 속성 값을 주입받아야할 때 사용할 수 있다.

```java
class Miner {
	private String name;

	public Miner(String name){ 
	    this.name = name;
	} 
}
```


> 예를 들어 "smith"라는 이름의 광부를 만들고 싶다면 어떤 생성자를 사용해서 만드는게 적절할까?


static 예시

#### 클래스 안에 클래스?
(깊이 초 ~ 중 )



### 상속
(깊이 중 )


## 객체를 만드는 다양한 방법들 

깊이 중 ~ 고

### 생성자(기본, 매개변수)

제일 기본적인 방법으로 new 키워드를 사용해 객체를 생성할 수 있다. 
클래스 내부에 별도의 생성자가 존재하지 않는다면, 컴파일 단계에서 기본생성자가 자동으로 추가된다. 

별도의 반환 타입이 없으며, 생성자의 이름은 클래스의 이름과 동일하다. 

```java
public class Miner {
	private String name;
	private String mineLocation;
	private List<Mineral> bags = new ArrayList<>();

	public Miner(){}; // 기본 생성자
	public Miner(String name, String mineLocation) { // 매개변수를 갖는 생성자
		this.name = name;
		this.mineLocation = mineLocation;
	}
	
	public static void main(String[] args) {
		Miner miner = new Miner()
	}
}
```

매개변수를 가지는 생성자를 통해서도 객체를 생성할 수 있다. 다만 이경우에는 컴파일 단계에서 기본 생성자가 자동으로 추가되지는 않는다. 

### 생성자 + 수정자

생성자를 통해서 객체를 생성한 후에 필요한 상태를 수정자(setter)를 통해서 지정해주는 방법도 있다. 
이러한 객체 생성 방식을 [자바빈즈](https://ko.wikipedia.org/wiki/%EC%9E%90%EB%B0%94%EB%B9%88%EC%A6%88) 패턴이라고 한다. 

```java
public class Miner {  
    private String name;  
    private String miningTool;
    private boolean isExpert;  
  
    public Miner() {  
    }  
  
    public void setName(String name) {  
        this.name = name;  
    }  
  
    public void setMiningTool(String miningTool) {  
	    this.miningTool = miningTool;  
	}
  
    public void setExpert(boolean expert) {  
        isExpert = expert;  
    }  
  
    public static void main(String[] args) {  
        Miner miner = new Miner();  
        miner.setName("smith");  
        miner.setMineLocation("minecraft:smith");  
        miner.setExpert(true);  
    }
}
```

비교적 간단하고, 내가 원하는 값을 골라서 상태를 바꿔줄 수 있는 장점이 있지만,
이 방식의 경우 객체를 만들기 위해서 메서드를 여러개 호출해야하는 단점도 존재한다. 

메서드를 여러개 호출해야한다는 점 말고도 다른 특징이 존재하는데, 수정자를 통해서 객체내의 상태를 외부에서 변경할 수 있으므로, 이러한 패턴을 사용한 클래스는 불변상태로 만들 수 없다는 특징이 있다.  

불변 상태란 생성된 후에 상태를 변경할 수 없는 것을 말한다. 


불변상태에 자세한 내용은 별도의 글을 통해서 설명해둘 예정. 


### 정적 팩토리 메서드 생성
객체를 생성하는 일이 자주 일어나고, 유연한 방식으로 객체를 생성해야하는 경우가 많다면 "정적 팩토리 메서드"라는 것을 사용해서 객체를 생성해보는 것을 고려해볼 수 있다.

만일 같은 매개변수로 다른 객체를 생성하고 싶다거나, 구분하고 싶은 생성자에 의미를 부여하고 싶다면 어떻게 할까?

생성자는 반드시 객체의 이름과 동일해야하기 때문에, 같은 시그니처로 오버로딩이 불가능하다. 
> [!tip] 시그니처(Signature)란? 
> 여기서 말하는 시그니처란 메서드의 고유 생김새를 의미한다. 
> 시그니처는 **메서드명** , 메서드의 **매개 변수**로 구성된다.

왜 그런짓을? 이라고생각할 수 있는데 , 생성자의 경우 여러 개의 생성자를 만들 수는 있지만 이들을 구분할 수 있는 것은 매개변수의 타입과 순서뿐이다. (물론 IDE를 통해서 확인이 가능하지만)
헷갈릴 수 있다. 

```java
public static void main(String[] args) {
	Miner miner = new Miner() // ??? 어떤 매개변수를, 어떤 순서로 넣어야할지 파악하기 쉽지 않음.
}
```

자바에서는 정적 메서드를 통해서 객체를 반환할 수 있다. 생성자와 동일한 역할을 하는 정적 메서드를 "정적 팩토리 메서드"라고 부른다. 이는 자바 표준 명명은 아니고 관례적인 표현이다. 생김새는 다음과 같다. 

```java
class Miner {
	private String name;
	private boolean isExpert;
	private List<Mineral> bags = new ArrayList<>();

	private Miner(String name, boolean isExpert) {
		this.name = name;
		this.isExpert = isExpert;
	}

	// 전문가 광부를 생성하는 정적 팩토리 메서드
	public static Miner createExpertMiner(String name) {  
    return new Miner(name, true);  
}
	
	// 일반 광부를 생성하는 정적 팩토리 메서드
	public static Miner createNormalMiner(String name) {  
    return new Miner(name, false);  
}
}
```


```java
public static void main(String[] args) {
	// Miner miner = new Miner() 
	Miner smith = Miner.createExpertMiner("smith");
	Miner jonney = Miner.createNormalMiner("jonney");
}
```

이 방식의 장점은 반환될 타입의 특성을 메소드 이름을 통해서 의미를 이해하기 쉽다는 장점이 있다. 
- `createExpertMiner` 는 어떤 `Miner` 를 반환할 것으로 예상되는지 답해보자 

그리고 같은 시그니처로 여러 의미를 표현할 수 있는 생성자를 만들 수 있다.

### 장점

공간이 생김 이로 인해서 할 수 있는 것들이 늘어남. 


- 호출 시점에 새 인스턴스 반환 여부 
- 하위 타입 
- 

### 단점




### 빌더 클래스 사용


마무리하며
- 정리 
- 질문

