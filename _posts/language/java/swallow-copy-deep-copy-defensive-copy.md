---
title:
---

## 들어가며 

다양한 복사방법에 대해서 이해를 목적으로함 

메모리 구조에 대한 이해 필요. 


## 예시 성적표 

성적표 그림 그리고 있었음. 

자랑스럽게 보여줄려고

## 얕은 복사

성적표를 가져올때
현재 상태는 얕은 복사 상태임. 
이때 누가 길동이 성적표를 변경해버림. 

길동이는 EXCELLENT를 기대했는데 BAD가 나오는 결과가 발생
왜 이런 결과가??

(이미지와 코드 추가)


길동이를 생성할때 받은 성적표 객체의 참조값을 공유하고 있기 때문에. 
외부에서도 참조값으로 해당 객체에 접근할 수 있다. 

(이미지 스택과, 힙 영역으로 나오는 영역)

이를 막고 싶음. 

## 방어적 복사

길동이가 성적표를 받을때, 원본 성적표의 참조를 끊어버림. 
원본 성적표를 받아서 새 성적표를 내부적으로 가지고 있음. 
성적표를 보여줄때도 외부에서 이를 수정할 수 업게 참조를 끊은 새로운 객체로 반환하도록 변경
자랑스럽게 보여줌.

길동이는 과목 성적은 또 BAD가 나오는 결과가 발생
왜 또 이런 결과가?

(이미지와 코드 추가)

길동이가 받은 원본성적표와는 참조를 끊어냈지만, 성적표안에 있는 내부 객체의 과목 성적의 경우에는 동일한 객체를 가리키고 있었음. 
때문에 성적표에서 담고 있는 과목성적의 값을 변경할 경우, 길동이가 가지고 있는 과목성적의 값도 변경되게 됨.

(이미지 스택과, 힙 영역으로 나오는 영역)

이를 가는 길동이

## 깊은 복사

길동이가 성적표를 받을때, 원본 성적표는 물론 내부에 속한 과목 성적까지 모조리 재귀적으로 반복하면서 새로운 값으로 복사해서 길동이만의 새 성적표를 만들었음. 땀뻘뻘
덜덜 떨며 성적표를 보여줌. 

다행히 모두 EXCELLENT 가 나오게됨. 

이제서야 굉장히 고생한 얼굴로 웃음짓는 길동. 

## 정리 

| 특징         | 얕은 복사 (Shallow Copy) | 깊은 복사 (Deep Copy) | 방어적 복사 (Defensive Copy) |
| ---------- | -------------------- | ----------------- | ----------------------- |
| **복사의 범위** | 최상위 필드만              | 모든 필드와 하위 객체까지    | 필요에 따라 얕거나 깊게 선택        |
| **독립성**    | 내부 참조 공유             | 완전한 독립성           | 독립성을 보장                 |
| **목적**     | 빠르고 간단한 데이터 중복       | 완전한 데이터 분리        | 데이터 보호 및 무결성 유지         |
| **사용 사례**  | 간단한 데이터 구조           | 중첩된 데이터 구조        | 외부와 상호작용 시 안전성 확보       |
| **성능**     | 빠름                   | 느림                | 상황에 따라 다름               |


https://tecoble.techcourse.co.kr/post/2021-04-26-defensive-copy-vs-unmodifiable/




```
각 예시상황에 맞는 그림과 코드가 필요함. 
그림의 경우 메모리 구조를 나타내는 그림 하나 필요. 
- 이 그림으로 3가지 모두 나타내는 그림을 작성하기 

코드도 단계별로 필요
```